{"version":3,"sources":["components/PersonForm.jsx","components/Person.jsx","components/Persons.jsx","components/Filter.jsx","components/NotificationMessage.jsx","services/personsService.js","components/App.jsx","index.js"],"names":["PersonForm","handleSubmit","handleChangeName","handleChangeNumber","newName","newNumber","onSubmit","value","onChange","type","Person","id","name","number","handleDelete","onClick","Persons","persons","map","p","key","Filter","handleChangeFilter","NotificationMessage","message","color","error","style","border","backgroundColor","margin","padding","borderRadius","baseUrl","axios","get","then","response","data","newObject","post","delete","put","App","useState","setPersons","notification","setNotification","setNewName","setNewNumber","filterText","setFilterText","getData","personsService","initialData","catch","e","setTimeout","addNewPerson","returnedPerson","concat","status","updatePerson","person","updatedPerson","useEffect","filteredPersons","trim","length","filter","toLowerCase","includes","href","target","rel","evt","preventDefault","find","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a5365997.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nexport default function PersonForm({ handleSubmit, handleChangeName, handleChangeNumber, newName, newNumber }) {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleChangeName} />\r\n            </div>\r\n            <div>\r\n                number: <input value={newNumber} onChange={handleChangeNumber} />\r\n            </div>\r\n            <div>\r\n                <button type='submit'>add</button></div>\r\n        </form>)\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Person({ id, name, number, handleDelete }) {\r\n    return <div>{name} {number} <button onClick={() => handleDelete(id)}>delete</button></div>\r\n}\r\n","import React from 'react'\r\nimport Person from './Person'\r\n\r\nexport default function Persons({ persons, handleDelete }) {\r\n    return persons.map(p => <Person key={p.name} {...p} handleDelete={handleDelete} />)\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Filter({ handleChangeFilter }) {\r\n    return <div>filter shown with <input onChange={handleChangeFilter} /></div>\r\n}\r\n","import React from 'react'\r\n\r\nconst NotificationMessage = ({ message }) => {\r\n\r\n    if (message === null) return null\r\n\r\n    const color = message.error ? 'red' : 'green'\r\n\r\n    const style = {\r\n        border: `5px solid ${color}`,\r\n        color,\r\n        backgroundColor: '#ccc',\r\n        margin: 5,\r\n        padding: 10,\r\n        borderRadius: 5\r\n    }\r\n\r\n    return (\r\n        <div style={style}>\r\n            {message.message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NotificationMessage","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response)\r\n}\r\n\r\nconst update = newObject => {\r\n    const request = axios.put(`${baseUrl}/${newObject.id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    create,\r\n    remove,\r\n    update\r\n}","import React, { useState, useEffect } from 'react'\r\nimport PersonForm from './PersonForm'\r\nimport Persons from './Persons'\r\nimport Filter from './Filter'\r\nimport NotificationMessage from './NotificationMessage'\r\n\r\nimport personsService from '../services/personsService'\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [notification, setNotification] = useState(null)\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [filterText, setFilterText] = useState('')\r\n\r\n    const handleChangeName = evt => setNewName(evt.target.value)\r\n    const handleChangeNumber = evt => setNewNumber(evt.target.value)\r\n    const handleChangeFilter = evt => setFilterText(evt.target.value)\r\n\r\n    const handleSubmit = evt => {\r\n        evt.preventDefault()\r\n\r\n        if (newName.trim().length === 0) return\r\n\r\n        const person = persons.find(p => p.name.trim() === newName.trim())\r\n\r\n        if (person) {\r\n            const result = window.confirm(`${person.name}'s is already added to phonebook, replace the old number with a new one?`)\r\n            if (result) {\r\n                updatePerson(person)\r\n            }\r\n        } else {\r\n            addNewPerson()\r\n        }\r\n    }\r\n\r\n    const handleDelete = id => {\r\n        const person = persons.find(p => p.id === id)\r\n        const result = window.confirm(`Delete ${person.name}?`)\r\n        if (result) {\r\n            personsService\r\n                .remove(id)\r\n                .then(response => {\r\n                    getData()\r\n                })\r\n                .catch(e => {\r\n                    if (e.response.status === 404) {\r\n                        setNotification({ message: `Information of ${person.name} has already been removed from server`, error: true })\r\n                        setPersons(persons.filter(p => p.id !== id ? p : null))\r\n                    } else {\r\n                        setNotification({ message: `Error deleting: ${e}`, error: true })\r\n                    }\r\n                    setTimeout(() => {\r\n                        setNotification(null)\r\n                    }, 5000);\r\n                })\r\n        }\r\n    }\r\n\r\n    const getData = () => {\r\n        personsService\r\n            .getAll()\r\n            .then(initialData => {\r\n                setPersons(initialData)\r\n            })\r\n            .catch(e => {\r\n                setNotification({ message: `Error connecting to service: ${e}`, error: true })\r\n                setTimeout(() => {\r\n                    setNotification(null)\r\n                }, 5000);\r\n            })\r\n    }\r\n\r\n    const addNewPerson = () => {\r\n        const newPerson = { name: newName, number: newNumber }\r\n        personsService\r\n            .create(newPerson)\r\n            .then(returnedPerson => {\r\n                setPersons(persons.concat(returnedPerson))\r\n                setNewName('')\r\n                setNewNumber('')\r\n                setNotification({ message: `Added ${returnedPerson.name}`, error: false })\r\n                setTimeout(() => {\r\n                    setNotification(null)\r\n                }, 5000);\r\n            })\r\n            .catch(e => {\r\n                if (e.response.status === 400) {\r\n                    setNotification({ message: `Error adding: ${e.response.data.error}`, error: true })\r\n                    setTimeout(() => {\r\n                        setNotification(null)\r\n                    }, 5000);\r\n                } else {\r\n                    setNotification({ message: `Error adding: ${e.message}`, error: true })\r\n                    setTimeout(() => {\r\n                        setNotification(null)\r\n                    }, 5000);\r\n                }\r\n            })\r\n    }\r\n\r\n    const updatePerson = person => {\r\n        const updatedPerson = {\r\n            ...person,\r\n            number: newNumber\r\n        }\r\n        personsService\r\n            .update(updatedPerson)\r\n            .then(response => {\r\n                setPersons(persons.map(p => p.id !== updatedPerson.id ? p : updatedPerson))\r\n                setNewName('')\r\n                setNewNumber('')\r\n                setNotification({ message: `Updated ${updatedPerson.name}`, error: false })\r\n                setTimeout(() => {\r\n                    setNotification(null)\r\n                }, 5000);\r\n            })\r\n            .catch(e => {\r\n                if (e.response.status === 400) {\r\n                    setNotification({ message: `Error adding: ${e.response.data.error}`, error: true })\r\n                    setTimeout(() => {\r\n                        setNotification(null)\r\n                    }, 5000);\r\n                } else {\r\n                    setNotification({ message: `Error adding: ${e.message}`, error: true })\r\n                    setTimeout(() => {\r\n                        setNotification(null)\r\n                    }, 5000);\r\n                }\r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        getData()\r\n    }, [])\r\n\r\n    let filteredPersons = persons\r\n\r\n    if (filterText.trim().length > 0) {\r\n        filteredPersons = persons.filter(p => p.name.toLowerCase().includes(filterText.toLowerCase()))\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook by <a href=\"https://www.github.com/jonatandb\" target=\"_blank\" rel=\"noopener noreferrer\">Jonatandb</a></h2>\r\n\r\n            <NotificationMessage message={notification} />\r\n\r\n            <Filter handleChangeFilter={handleChangeFilter} />\r\n\r\n            <h3>Add a new</h3>\r\n\r\n            <PersonForm handleSubmit={handleSubmit} handleChangeName={handleChangeName} handleChangeNumber={handleChangeNumber} newName={newName} newNumber={newNumber} />\r\n\r\n            <h3>Numbers</h3>\r\n\r\n            <Persons persons={filteredPersons} handleDelete={handleDelete} />\r\n\r\n            <h5>Thanks to <a href=\"https://fullstackopen.com/en\" target=\"_blank\" rel=\"noopener noreferrer\">Full stack open 2020</a></h5>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './components/App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}